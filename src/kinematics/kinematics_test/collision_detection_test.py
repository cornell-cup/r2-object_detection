import unittest
from src.kinematics.collision_detection import checkCollision
from src.kinematics.arm_node import Node

if __name__ == '__main__':
    obstacle = [.05, .05, -.05, .3, .4, .5]
    collision_test_data = [
        [[1.06612, 0.78284, 1.95403, 2.65352, 2.44447, 0.52373], [.05, .05, -.05, .3, .4, .5], True],
        [[1.711, 1.38432, 5.53843, 0.01126, 1.89575, 5.78134], [.05, .05, -.05, .3, .4, .5], False],
        [[2.63534, 0.04616, 0.89461, 4.67411, 5.78316, 0.31031], [.05, .05, -.05, .3, .4, .5], False],
        [[1.65056, 0.99956, 0.86506, 1.12842, 0.58103, 1.66606], [.05, .05, -.05, .3, .4, .5], True],
        [[1.02441, 1.55442, 0.97383, 5.51852, 4.73745, 3.76987], [.05, .05, -.05, .3, .4, .5], False],
        [[0.79299, 1.37135, 4.70599, 5.88266, 0.89748, 4.41625], [.05, .05, -.05, .3, .4, .5], False],
        [[3.0194, 0.91933, 2.57933, 1.79437, 5.79426, 3.55476], [-0.15, 0.05, -0.05, 0.3, 0.4, 0.5], False],
        [[2.14872, 0.07814, 1.81757, 1.48625, 2.66449, 2.40793], [-0.15, 0.05, -0.05, 0.3, 0.4, 0.5], False],
        [[2.47197, 0.69723, 6.21018, 0.90618, 6.06007, 0.55672], [-0.15, 0.05, -0.05, 0.3, 0.4, 0.5], True],
    ]

    for trial in collision_test_data:
        node = Node(trial[0])
        assert checkCollision(trial[1], node) == trial[2]
